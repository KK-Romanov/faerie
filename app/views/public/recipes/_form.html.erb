<main>
<%= form_with model: @recipe, method: :post do |f| %>
　<h4>イメージ写真</h4>
  <%= f.file_field :image, accept: "image/jpeg,image/gif,image/png", class: "image" %>
  
  <h4>レシピについて</h4>
  <%= f.text_field :title,placeholder: "レシピ名(50文字以内)" ,size: 35 %>
	
  <h4>本文</h4>
  <%= f.text_area :description, placeholder: "レシピの説明(140字以内)",size: 35 %>
	
	<h4>材料</h4>
	<section class="ingredient">
    <%= f.fields_for :ingredients do |ingredient| %>
      <%= render "ingredient_fields", f: ingredient %>
    <% end %>
    <%= link_to_add_association "材料の追加", f, :ingredients %>
  </section>
        
  <h4>作り方</h4>
  <section class="step">
    <div class="field">
      <%= f.fields_for :steps do |step| %>
        <%= render "step_fields", f: step %>
      <% end %>
      <%= link_to_add_association "作り方の追加", f, :steps %>
    </div>
  </section>

  <%= f.label :review, "評価：" %>
  <div id="review"></div>
  <%#= f.hidden_field :review, id: :review %>

  <script>
    $('#review').empty(); // Turbolinksで星が増殖する現象を解消
    $('#review').raty({
        size     : 36,
        starOff: '<%= asset_path('star-off.png') %>',
        starOn: '<%= asset_path('star-on.png') %>',
        starHalf: '<%= asset_path('star-half.png') %>',
        // 登録するモデル名とカラム名を記述
        //  送信値として採用される
        scoreName: 'recipe[review]',
        half: true,
    });
  </script>
  
    <div class="form-group">
    <span>タグ</span>
    <%= f.collection_check_boxes(:tag_ids, @tags, :id, :name) do |tag| %>
      <div class="form-check">
        <%= tag.label class: 'form-check-label' do %>
          <%= tag.check_box class: 'form-check-input' %>
          <%= tag.text %>
        <% end %>
      </div>
    <% end %>
  </div>
  


<%#= form_with model:@recipe, local: true do |f| %>
<!--※タグの部分のみ抜粋-->
  <%= f.text_field :tag_names, class: "form-control",
    placeholder: "タグをつける。複数つけるには ' , ' で区切ってください。" %>

  <%= f.submit '投稿' %>
<%# end %>
<% end %>